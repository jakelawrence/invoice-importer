(this["webpackJsonpimport-csv-front-end"]=this["webpackJsonpimport-csv-front-end"]||[]).push([[0],{31:function(e,t,n){},34:function(e,t,n){},65:function(e,t,n){"use strict";n.r(t);var s=n(2),a=n.n(s),o=n(7),r=n.n(o),i=(n(31),n(3)),c=n.n(i),l=n(4),u=n(20),d=n(21),p=n(26),h=n(25),m=(n(33),n(22)),f=n.n(m),b=(n(34),n(23)),j=n.n(b),g=n(24),x=n.n(g),v=n(0),O={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.50)"},content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",background:"#424242",border:"none",width:"700px"}};function y(e){var t="";return e.forEach((function(e){t=(t=t.concat(e.join("!@#"))).concat("\n")})),t}var N=function(e){Object(p.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={fileName:"",file:null,uploading:!1,completed:!1,error:!1,modalIsOpen:!1,username:"",password:""},e}return Object(d.a)(n,[{key:"onFileUpload",value:function(e){this.setState({fileName:e.target.files[0].name,file:e.target.files[0],data:null})}},{key:"closeModal",value:function(){this.setState({modalIsOpen:!1})}},{key:"openModal",value:function(){this.setState({modalIsOpen:!0})}},{key:"getData",value:function(){var e=Object(l.a)(c.a.mark((function e(t){var n,s,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=y(t.data),console.log("Hello"),s="",a=!1,e.next=6,j()({method:"post",url:"http://localhost:5000/import",auth:{username:this.state.username,password:this.state.password},maxContentLength:1/0,maxBodyLength:1/0,data:{csv:n}}).then((function(e){s=e.data})).catch((function(e){401===e.response.status&&(s="Invalid Credentials",a=!0)}));case 6:a?this.setState({uploading:!1,completed:!0,error:!0,response:s}):this.setState({uploading:!1,completed:!0,response:s});case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"changeUsername",value:function(e){this.setState({username:e.target.value})}},{key:"changePassword",value:function(e){this.setState({password:e.target.value})}},{key:"onSubmit",value:function(){var e=Object(l.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({uploading:!0,modalIsOpen:!1}),f.a.parse(this.state.file,{complete:this.getData.bind(this)});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getCredentials",value:function(){this.state.file&&this.setState({modalIsOpen:!0})}},{key:"onLogin",value:function(){var e=Object(l.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"resetPage",value:function(){this.setState({completed:!1,fileName:"",file:null})}},{key:"render",value:function(){var e=this;return Object(v.jsxs)("div",{className:"App p-5",children:[Object(v.jsxs)(x.a,{isOpen:this.state.modalIsOpen,onRequestClose:this.closeModal.bind(this),style:O,contentLabel:"API Credentials",ariaHideApp:!1,children:[Object(v.jsx)("button",{className:"btn btn-primary",onClick:this.closeModal.bind(this),children:"close"}),Object(v.jsxs)("div",{className:"d-flex flex-column m-2 p-5",children:[Object(v.jsx)("h3",{className:"pb-2",children:"Enter Credentials"}),Object(v.jsxs)("div",{className:"form-group",children:[Object(v.jsx)("label",{className:"py-2",htmlFor:"username",children:"Username"}),Object(v.jsx)("input",{type:"text",className:"form-control",id:"username",placeholder:"username",onChange:this.changeUsername.bind(this)})]}),Object(v.jsxs)("div",{className:"form-group",children:[Object(v.jsx)("label",{className:"py-2",htmlFor:"password",children:"Password"}),Object(v.jsx)("input",{type:"password",className:"form-control",id:"password",placeholder:"password",onChange:this.changePassword.bind(this)})]}),Object(v.jsx)("button",{onMouseUp:function(){return e.onSubmit()},className:"btn btn-primary mt-5",children:"Submit"})]})]}),Object(v.jsx)("h1",{className:"p-5",children:"Import Invoice Charges"}),Object(v.jsxs)("div",{className:"bg-secondary m-auto w-50 d-flex flex-column p-5",children:[!this.state.uploading&&!this.state.completed&&Object(v.jsxs)(v.Fragment,{children:["Choose a file to import...",Object(v.jsxs)("form",{className:"p-5",children:[Object(v.jsx)("label",{htmlFor:"file-upload",className:"custom-file-upload",children:"Upload File"}),Object(v.jsx)("input",{onChange:function(t){return e.onFileUpload(t)},id:"file-upload",type:"file"}),Object(v.jsx)("div",{className:"p-2",children:this.state.fileName})]}),Object(v.jsx)("button",{onMouseUp:function(){return e.getCredentials()},className:"btn btn-primary mx-5",children:"Import"})]}),this.state.uploading&&!this.state.completed&&Object(v.jsxs)("div",{className:"d-flex flex-column",children:["Importing...",Object(v.jsx)("div",{className:"spinner-border m-auto mt-3",role:"status"})]}),!this.state.uploading&&this.state.completed&&!this.state.error&&Object(v.jsxs)("div",{className:"d-flex flex-column",children:[this.state.response,Object(v.jsx)("button",{onMouseUp:function(){return e.resetPage()},className:"btn btn-primary m-5",children:"Import Another File"})]}),!this.state.uploading&&this.state.completed&&this.state.error&&Object(v.jsxs)("div",{className:"d-flex flex-column",children:[this.state.response,Object(v.jsx)("button",{onMouseUp:function(){return e.resetPage()},className:"btn btn-danger m-5",children:"Try Again"})]})]})]})}}]),n}(s.Component),w=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,66)).then((function(t){var n=t.getCLS,s=t.getFID,a=t.getFCP,o=t.getLCP,r=t.getTTFB;n(e),s(e),a(e),o(e),r(e)}))};r.a.render(Object(v.jsx)(a.a.StrictMode,{children:Object(v.jsx)(N,{})}),document.getElementById("root")),w()}},[[65,1,2]]]);
//# sourceMappingURL=main.db1e5c22.chunk.js.map