(this["webpackJsonpimport-csv-front-end"]=this["webpackJsonpimport-csv-front-end"]||[]).push([[0],{31:function(e,t,s){},34:function(e,t,s){},65:function(e,t,s){"use strict";s.r(t);var n=s(2),a=s.n(n),o=s(6),r=s.n(o),i=(s(31),s(3)),c=s.n(i),l=s(7),d=s(20),u=s(21),h=s(26),p=s(25),m=(s(33),s(22)),b=s.n(m),f=(s(34),s(23)),j=s.n(f),g=s(24),x=s.n(g),O=s(0),v={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.50)"},content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",background:"#424242",border:"none",width:"700px"}};function y(e){var t="";return e.forEach((function(e){t=(t=t.concat(e.join("!@#"))).concat("\n")})),t}var N=function(e){Object(h.a)(s,e);var t=Object(p.a)(s);function s(){var e;Object(d.a)(this,s);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={fileName:"",file:null,uploading:!1,completed:!1,error:!1,modalIsOpen:!1,username:"",password:""},e}return Object(u.a)(s,[{key:"onFileUpload",value:function(e){this.setState({fileName:e.target.files[0].name,file:e.target.files[0],data:null})}},{key:"closeModal",value:function(){this.setState({modalIsOpen:!1})}},{key:"openModal",value:function(){this.setState({modalIsOpen:!0})}},{key:"getData",value:function(){var e=Object(l.a)(c.a.mark((function e(t){var s,n,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=y(t.data),n="",a=!1,e.next=5,j()({method:"post",url:"http://localhost:5000/import",auth:{username:this.state.username,password:this.state.password},maxContentLength:1/0,maxBodyLength:1/0,data:{csv:s}}).then((function(e){n=e.data})).catch((function(e){401===e.response.status?(n="Invalid Credentials",a=!0):503===e.response.status&&(console.log(e.response),n=e.response.data,a=!0)}));case 5:a?this.setState({uploading:!1,completed:!0,error:!0,response:n}):this.setState({uploading:!1,completed:!0,response:n});case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"changeUsername",value:function(e){this.setState({username:e.target.value})}},{key:"changePassword",value:function(e){this.setState({password:e.target.value})}},{key:"onSubmit",value:function(){var e=Object(l.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({uploading:!0,modalIsOpen:!1}),b.a.parse(this.state.file,{complete:this.getData.bind(this)});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getCredentials",value:function(){this.state.file&&this.setState({modalIsOpen:!0})}},{key:"resetPage",value:function(){this.setState({completed:!1,fileName:"",file:null})}},{key:"render",value:function(){var e=this;return Object(O.jsxs)("div",{className:"App p-5",children:[Object(O.jsxs)(x.a,{isOpen:this.state.modalIsOpen,onRequestClose:this.closeModal.bind(this),style:v,contentLabel:"API Credentials",ariaHideApp:!1,children:[Object(O.jsx)("button",{className:"btn btn-danger",onClick:this.closeModal.bind(this),children:"close"}),Object(O.jsxs)("div",{className:"d-flex flex-column m-2 p-5",children:[Object(O.jsx)("h3",{className:"pb-2",children:"Enter Credentials"}),Object(O.jsxs)("div",{className:"form-group",children:[Object(O.jsx)("label",{className:"py-2",htmlFor:"username",children:"Username"}),Object(O.jsx)("input",{type:"text",className:"form-control",id:"username",placeholder:"username",onChange:this.changeUsername.bind(this)})]}),Object(O.jsxs)("div",{className:"form-group",children:[Object(O.jsx)("label",{className:"py-2",htmlFor:"password",children:"Password"}),Object(O.jsx)("input",{type:"password",className:"form-control",id:"password",placeholder:"password",onChange:this.changePassword.bind(this)})]}),Object(O.jsx)("button",{onMouseUp:function(){return e.onSubmit()},className:"btn btn-primary mt-5",children:"Submit"})]})]}),Object(O.jsx)("h1",{className:"p-5",children:"Import Invoice Charges"}),Object(O.jsxs)("div",{className:"bg-secondary m-auto w-50 d-flex flex-column p-5 rounded",children:[!this.state.uploading&&!this.state.completed&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("h4",{children:"Choose a file to import..."}),Object(O.jsxs)("form",{className:"p-5",children:[Object(O.jsx)("label",{htmlFor:"file-upload",className:"custom-file-upload",children:"Upload File"}),Object(O.jsx)("input",{onChange:function(t){return e.onFileUpload(t)},id:"file-upload",type:"file",accept:".csv"}),Object(O.jsx)("div",{className:"p-2",children:this.state.fileName})]}),Object(O.jsx)("button",{onMouseUp:function(){return e.getCredentials()},className:"btn btn-primary mx-5",children:"Import"})]}),this.state.uploading&&!this.state.completed&&Object(O.jsxs)("div",{className:"d-flex flex-column",children:[Object(O.jsx)("h4",{children:"Importing..."}),Object(O.jsx)("div",{className:"spinner-border m-auto mt-3",role:"status"})]}),!this.state.uploading&&this.state.completed&&!this.state.error&&Object(O.jsxs)("div",{className:"d-flex flex-column",children:[Object(O.jsx)("h4",{children:this.state.response}),Object(O.jsx)("button",{onMouseUp:function(){return e.resetPage()},className:"btn btn-primary m-5",children:"Import Another File"})]}),!this.state.uploading&&this.state.completed&&this.state.error&&Object(O.jsxs)("div",{className:"d-flex flex-column",children:[Object(O.jsx)("h4",{children:this.state.response}),Object(O.jsx)("button",{onMouseUp:function(){return e.resetPage()},className:"btn btn-danger m-5",children:"Try Again"})]})]})]})}}]),s}(n.Component),w=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,66)).then((function(t){var s=t.getCLS,n=t.getFID,a=t.getFCP,o=t.getLCP,r=t.getTTFB;s(e),n(e),a(e),o(e),r(e)}))};r.a.render(Object(O.jsx)(a.a.StrictMode,{children:Object(O.jsx)(N,{})}),document.getElementById("root")),w()}},[[65,1,2]]]);
//# sourceMappingURL=main.24782d80.chunk.js.map