{"version":3,"sources":["App.js","reportWebVitals.js","index.js"],"names":["source","axios","CancelToken","customStyles","overlay","position","top","left","right","bottom","backgroundColor","content","marginRight","transform","background","border","width","App","state","fileName","file","uploading","completed","error","modalIsOpen","username","password","progress","numOfBatches","response","cancel","event","target","files","length","this","setState","name","data","result","a","formattedData","formatData","batch","method","url","auth","maxContentLength","Infinity","maxBodyLength","csv","checkPrevImported","lastImport","cancelToken","token","then","continue","prev_prog","message","catch","error_code","status","e","value","Papa","parse","complete","getData","bind","onBeforeunload","className","isOpen","onRequestClose","closeModal","style","contentLabel","ariaHideApp","onClick","htmlFor","type","id","placeholder","onChange","changeUsername","changePassword","onMouseUp","onSubmit","onFileUpload","accept","getCredentials","percent","Math","round","strokeWidth","strokeColor","resetPage","Component","batches","num_of_batches","ceil","i","slice","forEach","d","concat","join","window","onbeforeunload","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.9f1e095a.chunk.js","sourcesContent":["import React, { Component } from \"react\";\nimport \"bootswatch/dist/darkly/bootstrap.min.css\";\nimport Papa from \"papaparse\";\nimport \"./App.css\";\nimport axios from \"axios\";\nimport Modal from \"react-modal\";\nimport { Line } from \"rc-progress\";\nimport { Beforeunload } from \"react-beforeunload\";\nconst CancelToken = axios.CancelToken;\nconst source = CancelToken.source();\nvar batch_size = 500;\n\nconst customStyles = {\n  overlay: {\n    position: \"fixed\",\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n    backgroundColor: \"rgba(0, 0, 0, 0.50)\",\n  },\n  content: {\n    top: \"50%\",\n    left: \"50%\",\n    right: \"auto\",\n    bottom: \"auto\",\n    marginRight: \"-50%\",\n    transform: \"translate(-50%, -50%)\",\n    background: \"#424242\",\n    border: \"none\",\n    width: \"700px\",\n  },\n};\n\nclass App extends Component {\n  state = {\n    fileName: \"\",\n    file: null,\n    uploading: false,\n    completed: false,\n    error: false,\n    modalIsOpen: false,\n    username: \"\",\n    password: \"\",\n    progress: 0,\n    numOfBatches: 1,\n    response: \"\",\n  };\n\n  componentWillUnmount() {\n    if (source) {\n      source.cancel();\n    }\n  }\n\n  onFileUpload(event) {\n    if (event.target.files.length) {\n      this.setState({\n        fileName: event.target.files[0].name,\n        file: event.target.files[0],\n        data: null,\n      });\n    }\n  }\n\n  closeModal() {\n    this.setState({ modalIsOpen: false });\n  }\n\n  openModal() {\n    this.setState({ modalIsOpen: true });\n  }\n\n  async getData(result) {\n    var formattedData = formatData(result.data);\n    this.setState({ numOfBatches: formattedData.length });\n    for (const batch in formattedData) {\n      await axios({\n        method: \"post\",\n        url: \"http://ec2-3-143-234-11.us-east-2.compute.amazonaws.com/import\",\n        auth: {\n          username: this.state.username,\n          password: this.state.password,\n        },\n        maxContentLength: Infinity,\n        maxBodyLength: Infinity,\n        data: {\n          csv: formattedData[batch],\n          checkPrevImported: batch,\n          lastImport: batch < formattedData.length - 1,\n        },\n        cancelToken: source.token,\n      })\n        .then((response) => {\n          if (response.data.continue) {\n            var prev_prog = this.state.progress;\n            this.setState({ progress: prev_prog + 1 });\n          } else {\n            this.setState({\n              response: response.data.message,\n              completed: true,\n            });\n          }\n        })\n        .catch((error) => {\n          var error_code = error.response;\n          if (error_code && error_code.status === 401) {\n            this.setState({ response: \"Invalid Credentials\", error: true });\n          } else if (error_code && error_code === 503) {\n            this.setState({\n              response: \"Error Occured Connecting to Database\",\n              error: true,\n            });\n          } else {\n            this.setState({\n              response: \"Something went wrong, whoops!\",\n              error: true,\n            });\n          }\n        });\n\n      if (this.state.error || this.state.completed) {\n        break;\n      }\n    }\n    this.setState({\n      uploading: false,\n      completed: true,\n    });\n  }\n\n  changeUsername(e) {\n    this.setState({ username: e.target.value });\n  }\n\n  changePassword(e) {\n    this.setState({ password: e.target.value });\n  }\n\n  async onSubmit() {\n    this.setState({ uploading: true, modalIsOpen: false });\n    Papa.parse(this.state.file, {\n      complete: this.getData.bind(this),\n    });\n  }\n\n  getCredentials() {\n    if (this.state.file) {\n      this.setState({ modalIsOpen: true });\n    }\n  }\n\n  resetPage() {\n    this.setState({\n      fileName: \"\",\n      file: null,\n      uploading: false,\n      completed: false,\n      error: false,\n      modalIsOpen: false,\n      username: \"\",\n      password: \"\",\n      progress: 0,\n      numOfBatches: 1,\n      response: \"\",\n    });\n  }\n\n  render() {\n    return (\n      <Beforeunload onBeforeunload={() => \"Youâ€™ll lose your data!\"}>\n        <div className=\"App p-5\">\n          <Modal\n            isOpen={this.state.modalIsOpen}\n            onRequestClose={this.closeModal.bind(this)}\n            style={customStyles}\n            contentLabel=\"API Credentials\"\n            ariaHideApp={false}\n          >\n            <button\n              className=\"btn btn-danger\"\n              onClick={this.closeModal.bind(this)}\n            >\n              close\n            </button>\n            <div className=\"d-flex flex-column m-2 p-5\">\n              <h3 className=\"pb-2\">Enter Credentials</h3>\n              <div className=\"form-group\">\n                <label className=\"py-2\" htmlFor=\"username\">\n                  Username\n                </label>\n                <input\n                  type=\"text\"\n                  className=\"form-control\"\n                  id=\"username\"\n                  placeholder=\"username\"\n                  onChange={this.changeUsername.bind(this)}\n                ></input>\n              </div>\n              <div className=\"form-group\">\n                <label className=\"py-2\" htmlFor=\"password\">\n                  Password\n                </label>\n                <input\n                  type=\"password\"\n                  className=\"form-control\"\n                  id=\"password\"\n                  placeholder=\"password\"\n                  onChange={this.changePassword.bind(this)}\n                ></input>\n              </div>\n              <button\n                onMouseUp={() => this.onSubmit()}\n                className=\"btn btn-primary mt-5\"\n              >\n                Submit\n              </button>\n            </div>\n          </Modal>\n          <h1 className=\"p-5\">Import Invoice Charges</h1>\n          <div className=\"bg-secondary m-auto w-50 d-flex flex-column p-5 rounded\">\n            {!this.state.uploading && !this.state.completed && (\n              <>\n                <h4>Choose a file to import...</h4>\n                <form className=\"p-5\">\n                  <label htmlFor=\"file-upload\" className=\"custom-file-upload\">\n                    Upload File\n                  </label>\n                  <input\n                    onChange={(event) => this.onFileUpload(event)}\n                    id=\"file-upload\"\n                    type=\"file\"\n                    accept=\".csv\"\n                  />\n                  <div className=\"p-2\">{this.state.fileName}</div>\n                </form>\n                <button\n                  onMouseUp={() => this.getCredentials()}\n                  className=\"btn btn-primary mx-5\"\n                >\n                  Import\n                </button>\n              </>\n            )}\n            {this.state.uploading && !this.state.completed && (\n              <div className=\"d-flex flex-column\">\n                <h4>Importing...</h4>\n                <div className=\"p-3\">\n                  <Line\n                    percent={Math.round(\n                      (this.state.progress / this.state.numOfBatches) * 100\n                    )}\n                    strokeWidth=\"1.2\"\n                    strokeColor=\"#00bc8c\"\n                  />\n                </div>\n\n                {Math.round(\n                  (this.state.progress / this.state.numOfBatches) * 100\n                )}\n                {\"%\"}\n              </div>\n            )}\n            {!this.state.uploading &&\n              this.state.completed &&\n              !this.state.error && (\n                <div className=\"d-flex flex-column\">\n                  <h4>{this.state.response}</h4>\n                  <button\n                    onMouseUp={() => this.resetPage()}\n                    className=\"btn btn-primary m-5\"\n                  >\n                    Import Another File\n                  </button>\n                </div>\n              )}\n            {!this.state.uploading && this.state.completed && this.state.error && (\n              <div className=\"d-flex flex-column\">\n                <h4>{this.state.response}</h4>\n                <button\n                  onMouseUp={() => this.resetPage()}\n                  className=\"btn btn-danger m-5\"\n                >\n                  Try Again\n                </button>\n              </div>\n            )}\n          </div>\n        </div>\n      </Beforeunload>\n    );\n  }\n}\n\nwindow.onbeforeunload = function () {\n  return \"\";\n};\n\nfunction formatData(data) {\n  var batches = [];\n  var num_of_batches = Math.ceil(data.length / batch_size);\n\n  for (let i = 0; i < num_of_batches; i++) {\n    batches[i] = \"\";\n    var sliced_data = data.slice(i * batch_size, (i + 1) * batch_size);\n    sliced_data.forEach((d) => {\n      batches[i] = batches[i].concat(d.join(\"!@#\"));\n      batches[i] = batches[i].concat(\"\\n\");\n    });\n  }\n  return batches;\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}